---
import Logo from "@/components/Logo.astro";
import menu from "@/config/menu.json";
import { IoSearch } from "react-icons/io5";
import { BiTimeFive, BiChevronDown } from "react-icons/bi";

const main = menu.main || [];
const today = new Date();
const formattedDate = new Intl.DateTimeFormat('id-ID', {
  weekday: 'long', day: 'numeric', month: 'short', year: 'numeric'
}).format(today);
---

<header class="header sticky top-0 z-[1000] w-full">
  <div class="bg-[#0b1c3c] py-2 border-b border-white/5 w-full">
    <div class="container flex items-center">
      <div class="flex items-center text-white/80 text-[11px] md:text-xs font-medium">
        <BiTimeFive className="mr-2 h-4 w-4 text-orange-400" />
        <span class="capitalize">{formattedDate}</span>
      </div>
    </div>
  </div>

  <div class="w-full bg-white/50 backdrop-blur-md shadow-sm border-b border-black/5 transition-all duration-300">
    <nav class="container flex items-center justify-between py-4">
      <div class="flex items-center">
        <Logo />
      </div>

      <div class="flex items-center ml-auto">
        <ul id="nav-menu" class="navbar-nav hidden md:flex md:items-center md:space-x-10 font-bold">
          {main.map((item) => (
            <li class="nav-item group relative flex items-center h-full">
              {item.hasChildren ? (
                // Tombol Dropdown (Pages)
                <>
                  <button class="nav-link text-dark hover:text-primary transition text-base md:text-lg tracking-tight flex items-center py-2">
                    {item.name}
                    <BiChevronDown className="ml-1 h-5 w-5 group-hover:rotate-180 transition-transform" />
                  </button>
                  <ul class="absolute left-0 top-full hidden group-hover:block w-48 bg-white/95 backdrop-blur-xl shadow-xl rounded-xl border border-gray-100 py-3 mt-0">
                    {item.children.map((child: any) => (
                      <li>
                        <a href={child.url} class="block px-6 py-2 text-sm text-dark hover:text-primary hover:bg-gray-50 transition font-bold">
                          {child.name}
                        </a>
                      </li>
                    ))}
                  </ul>
                </>
              ) : (
                // Menu Biasa (Home, About, dll) - Ditambah flex items-center agar lurus
                <a href={item.url} class="nav-link text-dark hover:text-primary transition text-base md:text-lg tracking-tight flex items-center py-2">
                  {item.name}
                </a>
              )}
            </li>
          ))}
        </ul>

        <div class="ml-10 flex items-center border-l border-gray-300/50 pl-6 h-8">
          <a class="text-dark hover:text-primary transition p-2 flex items-center" href="/search">
            <IoSearch className="h-6 w-6" />
          </a>
        </div>
      </div>
    </nav>
  </div>
</header>